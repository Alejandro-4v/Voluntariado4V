<div class="auth-card" @slideUp>

  <div class="d-flex justify-content-between align-items-start mb-4">
    <div>
      <small class="text-muted fw-bold" style="font-size: 0.8rem;">Cuatrovientos Voluntariado</small>
      <h2 class="fw-bold text-dark mt-1">Log in</h2>
    </div>
    <img src="/assets/logo-blue.svg" alt="Logo Azul" width="60">
  </div>

  <!-- Error message -->
  @if (errorMessage) {
  <div class="alert alert-danger" role="alert">
    {{ errorMessage }}
  </div>
  }



  <form [formGroup]="loginForm" (ngSubmit)="onSubmit()">

    <!-- User Type Selector -->
    <div class="mb-3">
      <label class="form-label d-block">Soy:</label>
      <div class="btn-group w-100" role="group">
        <input type="radio" class="btn-check" formControlName="userType" value="voluntario" id="typeVoluntario"
          autocomplete="off">
        <label class="btn btn-outline-primary" for="typeVoluntario">Voluntario</label>

        <input type="radio" class="btn-check" formControlName="userType" value="entidad" id="typeEntidad"
          autocomplete="off">
        <label class="btn btn-outline-primary" for="typeEntidad">Entidad</label>

        <input type="radio" class="btn-check" formControlName="userType" value="administrador" id="typeAdmin"
          autocomplete="off">
        <label class="btn btn-outline-primary" for="typeAdmin">Admin</label>
      </div>
    </div>
    <div class="mb-3">
      <label class="form-label">Correo electrónico</label>
      <input type="email" class="form-control" formControlName="email" placeholder="nombre@correo.com"
        [class.is-invalid]="loginForm.get('email')?.invalid && (loginForm.get('email')?.dirty || loginForm.get('email')?.touched)"
        [disabled]="isLoading">

      @if (loginForm.get('email')?.errors?.['required']) {
      <div class="invalid-feedback">
        El correo es obligatorio.
      </div>
      }
      @if (loginForm.get('email')?.errors?.['email']) {
      <div class="invalid-feedback">
        Introduce un correo válido.
      </div>
      }
    </div>

    <div class="mb-3">
      <label class="form-label">Contraseña</label>
      <input type="password" class="form-control" formControlName="password" placeholder="Contraseña"
        [class.is-invalid]="loginForm.get('password')?.invalid && (loginForm.get('password')?.dirty || loginForm.get('password')?.touched)"
        [disabled]="isLoading">

      @if (loginForm.get('password')?.errors?.['required']) {
      <div class="invalid-feedback">
        La contraseña es obligatoria.
      </div>
      }
    </div>

    <div
      class="d-flex flex-column flex-sm-row justify-content-between align-items-center mt-2 mb-4 small gap-2 text-center text-sm-start">
      <div>
        <span class="text-muted">¿Aún no estás inscrito?</span><br>
        <a routerLink="/auth/registro-alumno" class="fw-bold">Inscríbete</a>
      </div>
      <a routerLink="/auth/recuperar-contrasena" class="text-primary text-decoration-none">¿Has olvidado tu
        contraseña?</a>
    </div>

    <button type="submit" class="btn btn-primary-cv w-100" [disabled]="isLoading">
      {{ isLoading ? 'Iniciando sesión...' : 'Iniciar sesión' }}
    </button>
  </form>
</div>