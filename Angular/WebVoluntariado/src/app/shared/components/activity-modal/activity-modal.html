<div class="modal-overlay" *ngIf="isOpen" (click)="onClose()">
  <div class="modal-content" (click)="$event.stopPropagation()" *ngIf="activity">
    <button class="modal-close" (click)="onClose()">×</button>

    <div class="modal-body">
      <!-- Left side - Image -->
      <div class="modal-image">
        <div class="image-container" [ngStyle]="{
            background: (activity.imagenUrl || activity.image)
              ? 'url(' + (activity.imagenUrl || activity.image) + ') center/cover'
              : 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)'
          }"></div>
      </div>

      <!-- Right side - Content -->
      <div class="modal-info">
        <h2 class="modal-title">{{ activity.nombre || activity.name }} - {{ activity.convoca?.nombre || activity.entity
          }}</h2>

        <!-- Date and Time -->
        <div class="info-section">
          <h3 class="info-label">Fecha y hora</h3>
          <div class="info-row">
            <span class="date">{{ (activity.inicio || activity.date) | date : 'dd/MM/yyyy' }}</span>
            <span class="time" *ngIf="activity.inicio || activity.time">{{ (activity.inicio || activity.time) | date :
              'HH:mm' }}</span>
          </div>
        </div>

        <!-- Location -->
        <div class="info-section">
          <h3 class="info-label">Lugar</h3>
          <p class="info-text">{{ activity.location || 'Ubicación no especificada' }}</p>
        </div>

        <!-- Slots -->
        <div class="info-section" *ngIf="activity.slots">
          <h3 class="info-label">Plazas habilitadas / disponibles</h3>
          <p class="info-text">{{ activity.filled || activity.voluntarios?.length || 0 }} / {{ activity.slots }}</p>
        </div>

        <!-- Tipos de Actividad -->
        <div class="info-section" *ngIf="activity.tiposActividad?.length">
          <h3 class="info-label">Tipos de Actividad</h3>
          <div class="d-flex flex-wrap gap-2">
            <span class="badge bg-primary rounded-pill" *ngFor="let tipo of activity.tiposActividad">
              {{ tipo.descripcion }}
            </span>
          </div>
        </div>

        <!-- ODS -->
        <div class="info-section" *ngIf="activity.ods?.length">
          <h3 class="info-label">ODS</h3>
          <div class="d-flex flex-wrap gap-2">
            <span class="badge bg-success rounded-pill" *ngFor="let ods of activity.ods">
              {{ ods.descripcion }}
            </span>
          </div>
        </div>

        <!-- Description -->
        <div class="info-section">
          <h3 class="info-label">Descripción de la actividad</h3>
          <p class="info-text">{{ activity.descripcion || activity.description || 'Sin descripción disponible' }}</p>
        </div>

        <!-- Action Buttons -->
        <!-- Student Buttons -->
        <div class="modal-buttons text-center" *ngIf="mode === 'student'">
          <button type="button" class="btn btn-primary" (click)="onAction()">
            {{ getButtonLabel() }}
          </button>
          <button type="button" class="btn btn-primary" (click)="onClose()">Cerrar</button>
        </div>

        <!-- Management Buttons -->
        <div class="modal-buttons d-flex gap-2 justify-content-center" *ngIf="mode === 'management'">
          <button type="button" class="btn btn-primary" (click)="onEdit()">Editar</button>
          <button type="button" class="btn btn-primary" (click)="onDelete()">Eliminar</button>
          <button type="button" class="btn btn-primary" (click)="onClose()">Cerrar</button>
        </div>
      </div>
    </div>
  </div>
</div>